---

    import '../styles/global.css';
    import Logo from '../../public/NVMlogo.svg';
    import LogoDark from '../../public/NVMlogoblanco.svg';

    const families = [
        { name: "Tableros de Distribucion", slug: "Tableros-Distribucion" },
        { name: "Transferencias Automáticas", slug: "Transferencias-Automáticas" },
        { name: "Tableros para Bancos de Condensadores", slug: "Bancos-Condensadores" },
        { name: "CCM Centro de Control de Motores", slug: "ccm-control-motores" },
        { name: "Celdas AE319", slug: "Celdas-AE319" },
        { name: "Tableros de sincronismos", slug: "Tableros-Sincronismos" },
    ];
---

<header id="site-header" class="fixed top-0 inset-x-0 z-50 transition-transform duration-300 bg-gray-50 dark:text-white dark:bg-gray-900">
    <nav class="max-w-7xl mx-auto h-16 px-4 flex items-center justify-between">
        <a href="/" class="inline-flex items-center shrink-0" aria-label="Inicio">

            <img class="h-120 w-auto block dark:hidden mt-7 decoding="async" loading="eager" src="/NVMlogo.svg" alt="NVM Logo" "/>
            <img class="h-120 w-auto hidden dark:block mt-7" src="/NVMlogoblanco.svg" alt="NVM Logo" />

        </a>

        <ul class="hidden md:flex items-center space-x-6 text-sm font-medium">
            <li><a href="/" class="hover:text-amarillonvm">Inicio</a></li>
            <li><a href="#servicios" class="hover:text-amarillonvm">Servicios</a></li>
            <li><a href="#quienes-somos" class="hover:text-amarillonvm">Quiénes somos</a></li>
            <li class="relative">

                <button id="desktop-familias-btn" type="button" aria-expanded="false" class="inline-flex items-center hover:text-amarillonvm focus:outline-none">
                    Portafolio
                    <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                    </svg>
                </button>

                <div id="desktop-familias-menu" class="hidden absolute right-0 mt-2 w-48 rounded-md shadow-lg border bg-gray-50 dark:bg-gray-800 dark:border-gray-700 z-10">
                    {families.map((fam) => (
                            <a href={`/familias/${fam.slug}`} class="block px-4 py-2 hover:bg-gray-200 dark:hover:bg-amarillonvm" key={fam.slug}>{fam.name}</a>
                    ))}
                </div>
            </li>
            <li><a href="#contacto" class="hover:text-amarillonvm">Contacto</a></li>
        </ul>


        <div class="flex md:hidden items-center space-x-3">

            <button id="mobile-menu-btn" class="p-2 rounded border relative w-10 h-10 flex items-center justify-center" aria-label="Abrir menú">
                <svg id="icon-hamburger" class="w-6 h-6 absolute transition-all duration-300" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
                <svg id="icon-close" class="w-6 h-6 absolute opacity-0 scale-75 transition-all duration-300" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 6l12 12M6 18L18 6" />
                </svg>
            </button>
        </div>
    </nav>


    <div id="mobile-menu" class="md:hidden hidden bg-gray-50 border-t shadow-lg dark:bg-gray-900 dark:border-gray-700 z-10">
        <ul class="p-4 space-y-4 text-base">
            <li><a href="/" class="block">Inicio</a></li>
            <li><a href="#servicios" class="block">Servicios</a></li>
            <li><a href="#quienes-somos" class="block">Quiénes somos</a></li>
            <li>
                <details>
                    <summary class="cursor-pointer py-2 select-none">Portafolio</summary>
                    <div class="pl-4 space-y-2 mt-2">
                        {families.map((fam) => (
                                <a href={`/familias/${fam.slug}`} class="block">{fam.name}</a>
                        ))}
                    </div>
                </details>
            </li>
            <li><a href="#contacto" class="block">Contacto</a></li>
        </ul>
    </div>


    <script is:inline>
        (function() {

            const mobileBtn = document.getElementById('mobile-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const iconHamburger = document.getElementById('icon-hamburger');
            const iconClose = document.getElementById('icon-close');
            let mobileOpen = false;
            mobileBtn.addEventListener('click', () => {
                mobileOpen = !mobileOpen;
                mobileMenu.classList.toggle('hidden', !mobileOpen);
                iconHamburger.classList.toggle('opacity-0', mobileOpen);
                iconHamburger.classList.toggle('scale-75', mobileOpen);
                iconClose.classList.toggle('opacity-0', !mobileOpen);
                iconClose.classList.toggle('scale-75', !mobileOpen);
            });


            const famBtn = document.getElementById('desktop-familias-btn');
            const famMenu = document.getElementById('desktop-familias-menu');
            famBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                const expanded = famBtn.getAttribute('aria-expanded') === 'true';
                famBtn.setAttribute('aria-expanded', expanded ? 'false' : 'true');
                famMenu.classList.toggle('hidden', expanded);
            });

            document.addEventListener('click', (e) => {
                if (!famMenu.contains(e.target) && !famBtn.contains(e.target)) {
                    famMenu.classList.add('hidden');
                    famBtn.setAttribute('aria-expanded', 'false');
                }
            });


            const header = document.getElementById('site-header');
            let lastScroll = window.scrollY;
            let ticking = false;
            function handleScroll() {
                const current = window.scrollY;
                if (current > lastScroll && current > 50) {

                    header.style.transform = 'translateY(-100%)';
                } else {

                    header.style.transform = '';
                }
                lastScroll = current;
                ticking = false;
            }
            window.addEventListener('scroll', () => {
                if (!ticking) {
                    window.requestAnimationFrame(handleScroll);
                    ticking = true;
                }
            });
        })();
    </script>
</header>

